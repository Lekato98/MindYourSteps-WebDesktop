System.register("chunks:///_virtual/PlayerController.ts",["cc"],(function(e){"use strict";var t,i,n,o,r,u,s,a,l;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Animation,o=e.SkeletalAnimation,r=e.AudioSource,u=e.systemEvent,s=e.SystemEvent,a=e.Vec3,l=e.Component}],execute:function(){var c,p,m,h,_,d,f,y,v,b,P;function g(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function J(e,t,i,n,o){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}t._RF.push({},"0df57qmOPhLHZsHgbUTaQ38","PlayerController",void 0);var w=i.ccclass,A=i.property;e("PlayerController",(c=w("PlayerController"),p=A({type:n}),m=A({type:o}),h=A(r),_=A(r),c((y=J((f=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return g(S(t=e.call.apply(e,[this].concat(n))||this),"BodyAnim",y,S(t)),g(S(t),"CocosAnim",v,S(t)),g(S(t),"onFall",b,S(t)),g(S(t),"onJump",P,S(t)),j(S(t),"_startJump",!1),j(S(t),"_jumpStep",0),j(S(t),"_curJumpTime",0),j(S(t),"_jumpTime",.3),j(S(t),"_curJumpSpeed",0),j(S(t),"_curPos",new a),j(S(t),"_deltaPos",new a(0,0,0)),j(S(t),"_targetPos",new a),j(S(t),"_isMoving",!1),j(S(t),"_curMoveIndex",0),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=n.prototype;return o.start=function(){},o.reset=function(){this._curMoveIndex=0},o.setInputActive=function(e){e?u.on(s.EventType.MOUSE_UP,this.onMouseUp,this):u.off(s.EventType.MOUSE_UP,this.onMouseUp,this)},o.onMouseUp=function(e){0===e.getButton()?this.jumpByStep(1):2===e.getButton()&&this.jumpByStep(2)},o.jumpByStep=function(e){var t;null===(t=this.onJump)||void 0===t||t.play(),this._isMoving||(this._startJump=!0,this._jumpStep=e,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),a.add(this._targetPos,this._curPos,new a(this._jumpStep,0,0)),this._isMoving=!0,this.CocosAnim&&(this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump")),this.BodyAnim&&(1===e||2===e&&this.BodyAnim.play("twoStep")),this._curMoveIndex+=e)},o.onOnceJumpEnd=function(){var e;this._isMoving=!1,null===(e=this.CocosAnim)||void 0===e||e.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._curMoveIndex)},o.update=function(e){this._startJump&&(this._curJumpTime+=e,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*e,a.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},n}(l)).prototype,"BodyAnim",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=J(f.prototype,"CocosAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=J(f.prototype,"onFall",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=J(f.prototype,"onJump",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./PlayerController.ts"],(function(t){"use strict";var e,r,i,n,a,o,u,l,s,c,d;return{setters:[function(t){e=t.cclegacy,r=t._decorator,i=t.Prefab,n=t.CCInteger,a=t.Node,o=t.Label,u=t.AudioSource,l=t.Vec3,s=t.instantiate,c=t.Component},function(t){d=t.PlayerController}],execute:function(){var p,h,b,f,y,_,g,v,S,m,T,N,k,A,I;function G(t,e,r,i){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function B(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t,e,r,i,n){var a={};return Object.keys(i).forEach((function(t){a[t]=i[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(t,e,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}e._RF.push({},"23e10ddu2dHKoe+goAX0ZAM","GameManager",void 0);var E,O,L=r.ccclass,z=r.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(E||(E={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(O||(O={}));t("GameManager",(p=L("GameManager"),h=z({type:i}),b=z({type:n}),f=z({type:a}),y=z({type:d}),_=z({type:o}),g=z(u),p((m=w((S=function(t){var e,r;function i(){for(var e,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return G(C(e=t.call.apply(t,[this].concat(i))||this),"cubePrefab",m,C(e)),G(C(e),"roadLength",T,C(e)),G(C(e),"startMenu",N,C(e)),G(C(e),"playerCtrl",k,C(e)),G(C(e),"stepsLabel",A,C(e)),G(C(e),"backgroundAudio",I,C(e)),P(C(e),"_road",[]),P(C(e),"_curState",O.GS_INIT),P(C(e),"_backgroundAudioInterval",void 0),P(C(e),"_backgroundAudioTimeout",void 0),e}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n,a,o,u=i.prototype;return u.start=function(){this.curState=O.GS_INIT,this.playerCtrl.node.on("JumpEnd",this.onPlayerJumpEnd,this),this.startBackgroundAudio()},u.init=function(){this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerCtrl&&(this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(l.ZERO),this.playerCtrl.reset())},u.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(E.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===E.BT_NONE?this._road.push(E.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},u.spawnBlockByType=function(t){if(!this.cubePrefab)return null;var e=null;switch(t){case E.BT_STONE:e=s(this.cubePrefab)}return e},u.onStartButtonClicked=function(){this.stopBackgroundAudio(),this.playerCtrl.onFall.stop(),this.curState=O.GS_PLAYING},u.startBackgroundAudio=function(){var t=this;this.backgroundAudio.play(),this._backgroundAudioInterval=setInterval((function(){return t.backgroundAudio.play()}),5e3)},u.stopBackgroundAudio=function(){clearInterval(this._backgroundAudioInterval),clearTimeout(this._backgroundAudioTimeout),this.backgroundAudio.stop()},u.checkResult=function(t){var e=this;t<=this.roadLength?this._road[t]==E.BT_NONE&&(this.curState=O.GS_INIT,this.playerCtrl.onFall.play(),this._backgroundAudioTimeout=setTimeout((function(){return e.startBackgroundAudio()}),2e3)):this.curState=O.GS_INIT},u.onPlayerJumpEnd=function(t){this.stepsLabel&&(this.stepsLabel.string="Steps: "+t),this.checkResult(t)},n=i,(a=[{key:"curState",set:function(t){var e=this;switch(t){case O.GS_INIT:this.init();break;case O.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel&&(this.stepsLabel.string="Steps: 0"),setTimeout((function(){e.playerCtrl&&e.playerCtrl.setInputActive(!0)}),.1);break;case O.GS_END:}this._curState=t}}])&&B(n.prototype,a),o&&B(n,o),i}(c)).prototype,"cubePrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=w(S.prototype,"roadLength",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),N=w(S.prototype,"startMenu",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=w(S.prototype,"playerCtrl",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=w(S.prototype,"stepsLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=w(S.prototype,"backgroundAudio",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S))||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,n,t,i,r,o;return{setters:[function(a){e=a.cclegacy,n=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){e._RF.push({},"2beaaFRRQpMPIVpSkv+akgf","migrate-canvas",void 0);var a=1048575;function c(e,n){for(var t=0,i=e.children.length;t<i;t++)e.children[t].layer=n,c(e.children[t],n)}n.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var e,t,l,s=null===(e=n.getScene())||void 0===e?void 0:e.children,v=null===(t=n.getScene())||void 0===t?void 0:t.getComponentsInChildren(i);if(!(v.length<=1)){v=v.filter((function(e){return!!e.cameraComponent}));var m=null===(l=n.getScene())||void 0===l?void 0:l.getComponentsInChildren(r),p=0;m.forEach((function(e){return p|=e.visibility&a}));for(var u=[],f=0,d=s.length;f<d;f++){var C=s[f];if(o.isPersistRootNode(C)){var h=C.getComponentsInChildren(i);0!==h.length&&u.push.apply(u,h.filter((function(e){return!!e.cameraComponent})))}}u.forEach((function(e){if(v.find((function(n){return n!==e&&n.cameraComponent.visibility&e.cameraComponent.visibility&a}))){var n=~p,t=n&~(n-1);e.cameraComponent.visibility=t|4293918720&e.cameraComponent.visibility,c(e.node,t),p|=n}}))}}));var l=cc.Node.prototype.setParent;function s(e){var n=null,t=e.getComponent(i);return t&&t.cameraComponent?n=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(e.parent&&(n=s(e.parent)),n)}cc.Node.prototype.setParent=function(e,n){if(l.call(this,e,n),e){var t=s(this);t&&(this.layer=t,c(this,t))}},e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./PlayerController.ts","./GameManager.ts","./migrate-canvas.ts"],(function(){"use strict";return{setters:[function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});